# 공통 규칙
## common header
```json
{"authorization": "Bearer ACCESS_TOKEN"}
```
## common response model
```json
// success
{
	"result": true,
	"data": data model
}

// fail
{
	"result": false,
	"error": {
		"code": 9999,
		"msg": "unknown"
	}
}
```

# users
## post
### path: api/users/
#### body
```json
{"nick": "name"}
```
#### response data
- User model

## get
### path: api/users/
#### response data
```json
[{user: User model, note_count: 10}]
```

### path: users/:id
#### response data
```json
{user: User model, note_count: 10}
```


### path: api/users/me
#### response data
```json
{user: User model, note_count: 10}
```

### (TODO)path: users/search
#### query
- nick
#### response data
```json
{"user_infos": [{user: User model, note_count: 10}]}
```

### path: api/users/favorites
#### response data
```json
{"product_ids": Product Id Array}
```

## put
### path: api/users/me
#### body
```json
{"nick": "nick name",
"intro": "intro"}
```

## delete
### path: api/users/me
#### response data
- null

# products
## post
### path: products/
#### body
```json
{"name": "product name",
"desc": String(Optional),
"type": 1,
"barcode_id": optional,
"image_id": optional}
```
#### response data
- Product model
### path: api/products/favorite
#### body
```json
{"product_id": "product name",
"is_favorite": true
```

#### response data
- null

## get
### path: products/:id
#### response data
```json
{"product": Product model,
"image_ids": [ProductImage id],
"favorite_count": count,
"note_count": count}
```

### path: products/barcode/:barcode_id
#### response data
```json
{"product": Product model,
"image_ids": [ProductImage id],
"favorite_count": count,
"note_count": count}
```

### path: products/
#### query
- page
- per
- order_by: "registered"(default), "rating"
- name(optional)
- type(optional)
#### response data
```json
[
  {"product": Product model,
  "image_ids": [ProductImage id(최대 3개)]}
]
```

### path: api/products/favorite
#### query
- page
- per
#### response data
```json
[
  {"product": Product model,
  "image_ids": [ProductImage id(최대 3개)]}
]
```

## put
## delete
### path: products/:id(안씀)
#### response data
- null

# notes
## post
### path: api/notes/
#### body
```json
{"product_id": "product_id",
"body": "body",
"rating": 10,
"selected_flavors": [1, 2, 3],
"image_ids": [ProductImage id],
"is_public": true}
```
#### response data
- Note model

## get
### path: notes/:id
#### response data
```json
{"note": Note model,
"product": Product model,
"user": User model(Optional),
"image_ids": [ProductImage id],
"flavors": [Int](Optional)}
```

### path: notes/
#### query
- page
- per
- product_id(optional)
#### response data
```json
[
  {"note": Note model,
  "product": Product model,
  "user": User model(Optional),
  "image_ids": [ProductImage id](최대 3개)}
]
```

### path: notes/user/:id
#### query
- page
- per
#### response data
```json
[
  {"note": Note model,
  "product": Product model,
  "user": User model(Optional),
  "image_ids": [ProductImage id](최대 3개)}
]
```

## put
### path: api/notes/:id
#### body
- Note model

## delete
### path: api/notes/:id
#### response data
- null

# images
## get
### (TODO)path: images/
#### query
- page
- per
- product_id(optional)
#### response data
```json
["7c9e6679-7425-40de-944b-e07fc1f90ae7", ...]
```
## post
### path: api/images/
#### header
- Content-Type: multipart/form-data
#### body
```json
{"product_id": product_id(Optional)
"note_id": note_id(Optional)}
```
#### response data
```json
{
	"7c9e6679-7425-40de-944b-e07fc1f90ae7"
}
```
## delete
### path: api/images/:id
#### response data
- null

# btn
## get
### path: btn/home
#### response data
```json
{"recentNotes": [{
	"note": Note model,
	"product": Product model,
	"user": User model,
	"image_ids": [ProductImage id]
}],
"recentProducts": [{
	"product": Product model,
	"image_ids": [ProductImage id]
}]}
```

### path: btn/report
#### response data
```json
[{"id": uuid,
"product_id": uuid,
"user_id": uuid,
"body": string,
"state": 0,
"reply": string,
"type": 0,
"registered": date}]
```

## post
### path: btn/report
#### body
```json
{"product_id": uuid,
"body": string}
```
#### response data
```json
{"id": uuid,
"product_id": uuid,
"user_id": uuid,
"body": string,
"state": 0,
"reply": string,
"type": 0,
"registered": date}
```
